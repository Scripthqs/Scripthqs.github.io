(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{603:function(s,t,a){"use strict";a.r(t);var n=a(21),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"代码规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码规范"}},[s._v("#")]),s._v(" 代码规范")]),s._v(" "),a("h2",{attrs:{id:"_1-集成-editorconfig-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-集成-editorconfig-配置"}},[s._v("#")]),s._v(" 1 集成 editorconfig 配置")]),s._v(" "),a("p",[s._v("新建.editorconfig文件，EditorConfig 有助于为不同 IDE 编辑器上处理同一项目的多个开发人员维护一致的编码风格。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("# http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("editorconfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org\n\nroot "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" # 表示所有文件适用\ncharset "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" # 设置文件字符集为 utf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\nindent_style "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" space # 缩进风格（tab "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" space）\nindent_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" # 缩进大小\nend_of_line "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" lf # "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("控制换行类型")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" cr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" crlf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntrim_trailing_whitespace "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" # 去除行首的任意空白字符\ninsert_final_newline "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" # 始终在文件末尾插入一个新行\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("md"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" # 表示仅 md 文件适用以下规则\nmax_line_length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" off\ntrim_trailing_whitespace "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("VSCode 需要安装一个插件：EditorConfig for VS Code 才能读取.editorconfig这个文件。")]),s._v(" "),a("p",[s._v("注意：在 vscode 中使用自动格化时，需要选择自动格式化工具，一般 vue 项目会有vetur，eslint等等，有时需要选择正确的插件才能生效。而 prettier 和 eslint 有可能有冲突，需要处理。")]),s._v(" "),a("h2",{attrs:{id:"_2-使用-prettier-工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-prettier-工具"}},[s._v("#")]),s._v(" 2 使用 prettier 工具")]),s._v(" "),a("p",[s._v("Prettier 是一款强大的代码格式化工具，支持 JavaScript、TypeScript、CSS、SCSS、Less、JSX、Angular、Vue、GraphQL、JSON、Markdown 等语言，基本上前端能用到的文件格式它都可以搞定，是当下最流行的代码格式化工具。(vscode 和 vetur 自带格式化，不一定用这个)")]),s._v(" "),a("p",[s._v("1.安装prettier")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" prettier -D\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2.配置.prettierrc文件：")]),s._v(" "),a("ul",[a("li",[s._v("useTabs：使用tab缩进还是空格缩进，选择false；")]),s._v(" "),a("li",[s._v("tabWidth：tab是空格的情况下，是几个空格，选择2个；")]),s._v(" "),a("li",[s._v("printWidth：当行字符的长度，推荐80，也有人喜欢100或者120；")]),s._v(" "),a("li",[s._v("singleQuote：使用单引号还是双引号，选择true，使用单引号；")]),s._v(" "),a("li",[s._v("trailingComma：在多行输入的尾逗号是否添加，设置为 "),a("code",[s._v("none")]),s._v("；")]),s._v(" "),a("li",[s._v("semi：语句末尾是否要加分号，默认值true，选择false表示不加；")]),s._v(" "),a("li",[s._v("htmlWhitespaceSensitivity：解决包裹文字时候结束标签的结尾尖括号掉到了下一行")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useTabs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tabWidth"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"printWidth"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"singleQuote"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"trailingComma"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"none"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"semi"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("，\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"htmlWhitespaceSensitivity"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ignore"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("3.创建.prettierignore忽略文件")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n.local\n.output.js\n/node_modules/**\n\n**/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("svg\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*.sh\n\n/public/*\n")])])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("4.VSCode 需要安装 prettier 的插件")]),s._v(" "),a("p",[s._v("5.测试 prettier 是否生效")]),s._v(" "),a("ul",[a("li",[s._v("测试一：在代码中保存代码；")]),s._v(" "),a("li",[s._v("测试二：配置一次性修改的命令；")])]),s._v(" "),a("p",[s._v("在 package.json 中配置一个 scripts：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prettier"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prettier --write ."')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_3-使用-eslint-检测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用-eslint-检测"}},[s._v("#")]),s._v(" 3 使用 ESLint 检测")]),s._v(" "),a("p",[s._v("1.在前面创建项目的时候，我们就选择了 ESLint，所以 Vue 会默认帮助我们配置需要的 ESLint 环境。")]),s._v(" "),a("p",[s._v("2.VSCode 需要安装 ESLint 插件：")]),s._v(" "),a("p",[s._v("3.解决 eslint 和 prettier 冲突的问题：")]),s._v(" "),a("p",[s._v("安装插件：（vue 在创建项目时，如果选择 prettier，那么这两个插件会自动安装）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i eslint-plugin-prettier eslint-config-prettier -D\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("添加prettier插件：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plugin:vue/vue3-essential"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint:recommended"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@vue/typescript/recommended"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@vue/prettier"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@vue/prettier/@typescript-eslint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'plugin:prettier/recommended'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("关闭 ESlint 的一些自己暂时不需要的警告：")]),s._v(" "),a("ul",[a("li",[s._v("复制警告的提示，在 .eslintrc.js 这个文件中")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("  rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-console"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"warn"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"off"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-debugger"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"warn"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"off"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@typescript-eslint/no-var-requires"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"off"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"_4-git-husky和eslint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-git-husky和eslint"}},[s._v("#")]),s._v(" 4 git Husky和eslint")]),s._v(" "),a("p",[s._v("虽然我们已经要求项目使用eslint了，但是不能保证组员提交代码之前都将eslint中的问题解决掉了：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("也就是我们希望保证代码仓库中的代码都是符合eslint规范的；")])]),s._v(" "),a("li",[a("p",[s._v("那么我们需要在组员执行 "),a("code",[s._v("git commit")]),s._v(" 命令的时候对其进行校验，如果不符合eslint规范，那么自动通过规范进行修复；")])])]),s._v(" "),a("p",[s._v("那么如何做到这一点呢？可以通过Husky工具：")]),s._v(" "),a("ul",[a("li",[s._v("husky是一个git hook工具，可以帮助我们触发git提交的各个阶段：pre-commit、commit-msg、pre-push")])]),s._v(" "),a("p",[s._v("如何使用husky呢？")]),s._v(" "),a("p",[s._v("这里我们可以使用自动配置命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("npx husky-init "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这里会做三件事：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安装husky相关的依赖")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"husky"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.0.0"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("在项目目录下创建 "),a("code",[s._v(".husky")]),s._v(" 文件夹")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("npx huksy "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("在package.json中添加一个脚本")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prepare"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"husky install"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("接下来，我们需要去完成一个操作：在进行commit时，执行lint脚本：")])])]),s._v(" "),a("p",[s._v("这个时候我们执行git commit的时候会自动对代码进行lint校验。")]),s._v(" "),a("h2",{attrs:{id:"_5-git-commit规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-git-commit规范"}},[s._v("#")]),s._v(" 5 git commit规范")]),s._v(" "),a("h3",{attrs:{id:"_1-代码提交风格"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-代码提交风格"}},[s._v("#")]),s._v(" 1 代码提交风格")]),s._v(" "),a("p",[s._v("通常我们的git commit会按照统一的风格来提交，这样可以快速定位每次提交的内容，方便之后对版本进行控制。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw17gaqjj30to0cj3zp.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("但是如果每次手动来编写这些是比较麻烦的事情，我们可以使用一个工具：Commitizen")]),s._v(" "),a("ul",[a("li",[s._v("Commitizen 是一个帮助我们编写规范 commit message 的工具；")])]),s._v(" "),a("p",[s._v("1.安装Commitizen")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" commitizen -D\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2.安装cz-conventional-changelog，并且初始化cz-conventional-changelog：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("npx commitizen init cz-conventional-changelog --save-dev --save-exact\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这个命令会帮助我们安装cz-conventional-changelog：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqvz2odi4j30ek00zmx2.jpg",alt:"image-20210723145249096"}})]),s._v(" "),a("p",[s._v("并且在package.json中进行配置：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqvzftay5j30iu04k74d.jpg",alt:"img"}})]),s._v(" "),a("p",[s._v("这个时候我们提交代码需要使用 "),a("code",[s._v("npx cz")]),s._v("：")]),s._v(" "),a("ul",[a("li",[s._v("第一步是选择type，本次更新的类型")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("Type")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("feat")]),s._v(" "),a("td",[s._v("新增特性 (feature)")])]),s._v(" "),a("tr",[a("td",[s._v("fix")]),s._v(" "),a("td",[s._v("修复 Bug(bug fix)")])]),s._v(" "),a("tr",[a("td",[s._v("docs")]),s._v(" "),a("td",[s._v("修改文档 (documentation)")])]),s._v(" "),a("tr",[a("td",[s._v("style")]),s._v(" "),a("td",[s._v("代码格式修改(white-space, formatting, missing semi colons, etc)")])]),s._v(" "),a("tr",[a("td",[s._v("refactor")]),s._v(" "),a("td",[s._v("代码重构(refactor)")])]),s._v(" "),a("tr",[a("td",[s._v("perf")]),s._v(" "),a("td",[s._v("改善性能(A code change that improves performance)")])]),s._v(" "),a("tr",[a("td",[s._v("test")]),s._v(" "),a("td",[s._v("测试(when adding missing tests)")])]),s._v(" "),a("tr",[a("td",[s._v("build")]),s._v(" "),a("td",[s._v("变更项目构建或外部依赖（例如 scopes: webpack、gulp、npm 等）")])]),s._v(" "),a("tr",[a("td",[s._v("ci")]),s._v(" "),a("td",[s._v("更改持续集成软件的配置文件和 package 中的 scripts 命令，例如 scopes: Travis, Circle 等")])]),s._v(" "),a("tr",[a("td",[s._v("chore")]),s._v(" "),a("td",[s._v("变更构建流程或辅助工具(比如更改测试环境)")])]),s._v(" "),a("tr",[a("td",[s._v("revert")]),s._v(" "),a("td",[s._v("代码回退")])])])]),s._v(" "),a("ul",[a("li",[s._v("第二步选择本次修改的范围（作用域）")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw8ca15oj30r600wmx4.jpg",alt:"image-20210723150147510"}})]),s._v(" "),a("ul",[a("li",[s._v("第三步选择提交的信息")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw8mq3zlj60ni01hmx402.jpg",alt:"image-20210723150204780"}})]),s._v(" "),a("ul",[a("li",[s._v("第四步提交详细的描述信息")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw8y05bjj30kt01fjrb.jpg",alt:"image-20210723150223287"}})]),s._v(" "),a("ul",[a("li",[s._v("第五步是否是一次重大的更改")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw9z5vbij30bm00q744.jpg",alt:"image-20210723150322122"}})]),s._v(" "),a("ul",[a("li",[s._v("第六步是否影响某个open issue")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqwar8xp1j30fq00ya9x.jpg",alt:"image-20210723150407822"}})]),s._v(" "),a("p",[s._v("我们也可以在scripts中构建一个命令来执行 cz：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqwc4gtkxj30e207174t.jpg",alt:"image-20210723150526211"}})]),s._v(" "),a("h3",{attrs:{id:"_2-代码提交验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-代码提交验证"}},[s._v("#")]),s._v(" 2 代码提交验证")]),s._v(" "),a("p",[s._v("如果我们按照cz来规范了提交风格，但是依然有同事通过 "),a("code",[s._v("git commit")]),s._v(" 按照不规范的格式提交应该怎么办呢？")]),s._v(" "),a("ul",[a("li",[s._v("我们可以通过commitlint来限制提交；")])]),s._v(" "),a("p",[s._v("1.安装 @commitlint/config-conventional 和 @commitlint/cli")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i @commitlint/config-conventional @commitlint/cli -D\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2.在根目录创建commitlint.config.js文件，配置commitlint")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@commitlint/config-conventional'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("3.使用husky生成commit-msg文件，验证提交信息：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("npx husky "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/commit-msg "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npx --no-install commitlint --edit '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);