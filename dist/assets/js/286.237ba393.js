(window.webpackJsonp=window.webpackJsonp||[]).push([[286],{757:function(t,e,v){"use strict";v.r(e);var n=v(21),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"dom-事件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#dom-事件"}},[t._v("#")]),t._v(" DOM 事件")]),t._v(" "),v("h2",{attrs:{id:"事件的简介"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件的简介"}},[t._v("#")]),t._v(" 事件的简介")]),t._v(" "),v("p",[t._v("用户和浏览器之间的交互行为。点击某个元素、鼠标移动，关闭弹窗等等。")]),t._v(" "),v("p",[t._v("JavaScript 是以事件驱动为核心的语言。js 和 html 之间的交互是通过事件实现的。")]),t._v(" "),v("p",[t._v("我们可以在事件对应的属性中，设置一些 JS 代码，当事件被触发时，这些代码将会执行。")]),t._v(" "),v("p",[t._v("事件的三要素：事件源、事件、事件驱动程序")]),t._v(" "),v("ul",[v("li",[t._v("网页上弹出一个广告，我点击右上角的 X，广告就关闭了。这件事情里，事件源是：X。事件是：onclick。事件驱动程序是：广告关闭了。")]),t._v(" "),v("li",[t._v("谁引发的后续事件，谁就是事件源。")])]),t._v(" "),v("ol",[v("li",[t._v('获取事件源：`document.getElementById("box");')]),t._v(" "),v("li",[t._v("绑定事件："),v("code",[t._v("事件源.事件 = function(){事件的驱动程序}")]),t._v(" "),v("ul",[v("li",[t._v('box.onclick = function(){alert("box 被点击")};')])])]),t._v(" "),v("li",[t._v("书写事件驱动程序：关于 DOM 的操作")])]),t._v(" "),v("h2",{attrs:{id:"事件对象-event"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件对象-event"}},[t._v("#")]),t._v(" 事件对象 event")]),t._v(" "),v("p",[t._v("当事件的响应函数被触发时，会产生一个事件对象 event。浏览器每次都会将这个事件 event 作为实参传递给之前的响应函数。")]),t._v(" "),v("p",[t._v("这个对象中，包含了与当前事件相关的一切信息，比如鼠标的坐标、键盘的哪个按键被按下、鼠标滚轮滚动的方向。")]),t._v(" "),v("ul",[v("li",[t._v("所有浏览器都支持 event 对象")]),t._v(" "),v("li",[t._v("普通浏览器写法："),v("code",[t._v("event")])]),t._v(" "),v("li",[t._v("IE8 及以下写法："),v("code",[t._v("window.event")])]),t._v(" "),v("li",[t._v("兼容的写法："),v("code",[t._v("event = event || window.event;")])])]),t._v(" "),v("p",[t._v("事件对象的常用属性：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("timeStamp")]),t._v("返回事件生成的日期和事件")]),t._v(" "),v("li",[v("code",[t._v("bubbles")]),t._v("返回布尔值，指示事件是否时冒泡事件类型")]),t._v(" "),v("li",[v("code",[t._v("button")]),t._v("返回事件被触发时，哪个鼠标按钮被点击")]),t._v(" "),v("li",[v("code",[t._v("target")]),t._v("该事件被传送到的对象")]),t._v(" "),v("li",[v("code",[t._v("type")]),t._v("事件的类型")]),t._v(" "),v("li",[v("code",[t._v("pageX")]),t._v("和"),v("code",[t._v("pageY")]),t._v("光标在该网页的距离")]),t._v(" "),v("li",[v("code",[t._v("clientX")]),t._v("和"),v("code",[t._v("clientY")]),t._v("光标在可视区域的距离")]),t._v(" "),v("li",[v("code",[t._v("screenX")]),t._v("和"),v("code",[t._v("screenY")]),t._v("光标相对于浏览器的距离")])]),t._v(" "),v("h2",{attrs:{id:"事件的冒泡-bubble"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件的冒泡-bubble"}},[t._v("#")]),t._v(" 事件的冒泡 Bubble")]),t._v(" "),v("ul",[v("li",[t._v("指事件的向上传导，当后代元素上的事件被触发时，其祖先元素的相同事件也会被触发。")]),t._v(" "),v("li",[v("code",[t._v("div -> body -> html -> document -> window")])]),t._v(" "),v("li",[t._v("从开发的角度，冒泡多数情况是有用的。")]),t._v(" "),v("li",[v("code",[t._v("event.cancelBubble = true;")]),t._v("可以取消冒泡")])]),t._v(" "),v("h2",{attrs:{id:"事件的委派-委托"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件的委派-委托"}},[t._v("#")]),t._v(" 事件的委派（委托）")]),t._v(" "),v("ul",[v("li",[t._v("将事件统一绑定给元素的共同祖先元素，这样当后代元素上的事件触发时，会一直冒泡到祖先元素，通过祖先元素的响应函数来处理事件。")]),t._v(" "),v("li",[t._v("事件的委派利用了冒泡的原理，通过委派减少事件的绑定次数，提高程序的性能。")]),t._v(" "),v("li",[t._v("如果触发事件的对象是我们期望的元素，则执行,否则不执行。")]),t._v(" "),v("li",[t._v("event 中的 target 表示触发事件的对象。")])]),t._v(" "),v("h2",{attrs:{id:"事件的绑定-注册"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件的绑定-注册"}},[t._v("#")]),t._v(" 事件的绑定（注册）")]),t._v(" "),v("p",[t._v("绑定（注册）事件的两种方式：")]),t._v(" "),v("ul",[v("li",[v("p",[v("code",[t._v("onclick")])]),t._v(" "),v("ul",[v("li",[v("code",[t._v("element.onclick = function(){}")])]),t._v(" "),v("li",[v("code",[t._v("DOM对象.事件 = 函数")]),t._v("的这种绑定事件的方式，一个元素的一个事件只能绑定一个响应函数。绑定多个时，后者会覆盖前者。")])])]),t._v(" "),v("li",[v("p",[v("code",[t._v("addEventListener")])]),t._v(" "),v("ul",[v("li",[t._v('`element.addEventListener("click",function(){},false);')]),t._v(" "),v("li",[t._v("需要 3 个参数(IE8 及以下不支持)")]),t._v(" "),v("li",[t._v("1：事件的字符串（不要 on）")]),t._v(" "),v("li",[t._v("2：回调函数，当事件触发时，该函数会被执行")]),t._v(" "),v("li",[t._v("3：true 表示捕获阶段触发，false 表示冒泡阶段触发（默认），如果不写，就是默认值。")])])]),t._v(" "),v("li",[v("p",[v("code",[t._v("attachEvent")])]),t._v(" "),v("ul",[v("li",[t._v('element.attachEvent("onclick",function(){});')]),t._v(" "),v("li",[t._v("需要两个参数（IE8 及以下版本浏览器）")]),t._v(" "),v("li",[t._v("1 事件的字符串（要 on）")]),t._v(" "),v("li",[t._v("2 回调函数：当事件触发时，该函数会被执行")]),t._v(" "),v("li",[t._v("注意：执行顺序是，后绑定的先执行。")]),t._v(" "),v("li",[t._v("attachEvent()中的 this，是 window")])])])]),t._v(" "),v("h2",{attrs:{id:"事件的传播"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件的传播"}},[t._v("#")]),t._v(" 事件的传播")]),t._v(" "),v("p",[t._v("事件的传播有 3 个阶段：事件捕获、冒泡、目标。")]),t._v(" "),v("ul",[v("li",[t._v("事件捕获阶段：事件从祖先元素往子元素查找（DOM 树）结构，直到捕获到事件目标 target。在这个过程中，默认情况下，事件相应的监听函数是不会被触发的。\n"),v("ul",[v("li",[t._v("捕获顺序"),v("code",[t._v("window->document->html->body->父元素、子元素、目标元素")])])])]),t._v(" "),v("li",[t._v("事件目标：当到达目标元素之后，执行目标元素该事件相应的处理函数")]),t._v(" "),v("li",[t._v("事件的冒泡阶段：事件从事件目标 target 开始，从子元素依次触发祖先元素。\n"),v("ul",[v("li",[t._v("冒泡顺序"),v("code",[t._v("div->body->html->document")])])])])]),t._v(" "),v("p",[t._v("重点：")]),t._v(" "),v("ul",[v("li",[t._v("第一个接收到事件的对象是 window")]),t._v(" "),v("li",[t._v("js 中设计到 DOM 对象时，有两个对象最常用：window、document。它们两个是最先获取到事件的。")])]),t._v(" "),v("h2",{attrs:{id:"鼠标事件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#鼠标事件"}},[t._v("#")]),t._v(" 鼠标事件")]),t._v(" "),v("p",[t._v("鼠标拖拽事件：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("onmousedown")]),t._v("当鼠标按下时，开始拖拽、\n"),v("ul",[v("li",[t._v("获取"),v("code",[t._v("e.pageX - box1.offsetLeft")])]),t._v(" "),v("li",[t._v("获取"),v("code",[t._v("e.pageY - box1.offsetTop")])])])]),t._v(" "),v("li",[v("code",[t._v("onmousemove")]),t._v("当鼠标移动时，元素跟随鼠标移动\n"),v("ul",[v("li",[v("code",[t._v('box1.style.left = e.pageX - ox + "px";')])]),t._v(" "),v("li",[v("code",[t._v('box1.style.top = e.pageY - oy + "px";')])])])]),t._v(" "),v("li",[v("code",[t._v("onmouseup")]),t._v("当鼠标松开时，元素固定在当前位置\n"),v("ul",[v("li",[v("code",[t._v("document.onmousemove = null;")])])])])]),t._v(" "),v("p",[t._v("鼠标滚轮事件：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("onmousewheel")]),t._v("鼠标滚动的事件，会在滚轮滚动时触发，但是火狐不支持该属性。")]),t._v(" "),v("li",[v("code",[t._v("DOMMouseScroll")]),t._v("在火狐中使用"),v("code",[t._v("DOMMouseScroll")]),t._v("。注意该事件需要通过 addEventListener()函数来绑定。")]),t._v(" "),v("li",[t._v("一般情况下，监听 wheelDelta 的正负值，就可以确定鼠标滚轮的滚动方向。")])]),t._v(" "),v("div",{staticClass:"language-js line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[t._v("document"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mousewheel"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wheelDelta"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//向下滚<0")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br"),v("span",{staticClass:"line-number"},[t._v("3")]),v("br"),v("span",{staticClass:"line-number"},[t._v("4")]),v("br"),v("span",{staticClass:"line-number"},[t._v("5")]),v("br"),v("span",{staticClass:"line-number"},[t._v("6")]),v("br"),v("span",{staticClass:"line-number"},[t._v("7")]),v("br")])]),v("ul",[v("li",[t._v("火狐浏览器鼠标滚轮的信息保存在 detail 属性里面")])]),t._v(" "),v("div",{staticClass:"language-js line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[t._v("document"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DOMMouseScroll"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("detail"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//向下滚>0")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br"),v("span",{staticClass:"line-number"},[t._v("3")]),v("br"),v("span",{staticClass:"line-number"},[t._v("4")]),v("br"),v("span",{staticClass:"line-number"},[t._v("5")]),v("br"),v("span",{staticClass:"line-number"},[t._v("6")]),v("br"),v("span",{staticClass:"line-number"},[t._v("7")]),v("br")])]),v("ul",[v("li",[t._v("通过 addEventLister()方法绑定的响应函数，取消默认行为不能使用"),v("code",[t._v("return false")]),t._v("，而是使用"),v("code",[t._v("event.preventDefault();")])])]),t._v(" "),v("h2",{attrs:{id:"键盘事件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#键盘事件"}},[t._v("#")]),t._v(" 键盘事件")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("onkeydown")]),t._v("按键被按下")]),t._v(" "),v("li",[v("code",[t._v("onkeyup")]),t._v("按键被松开")]),t._v(" "),v("li",[t._v("键盘事件一般都会绑定给一些可以获取焦点的对象或者 document")]),t._v(" "),v("li",[t._v("如果一直按住某个键不松手，那么"),v("code",[t._v("onkeydown")]),t._v("事件会一直触发。")]),t._v(" "),v("li",[t._v("当 onkeydown 连续触发时，第一次和第二次之间会间隔稍微长一点，后续的间隔会非常快。这种设计是为了防止误操作的发生。")])]),t._v(" "),v("p",[t._v("判断键盘哪个键被按下：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("altKey")]),t._v('返回当事件被触发时，"ALT" 是否被按下。')]),t._v(" "),v("li",[v("code",[t._v("shiftKey")]),t._v('返回当事件被触发时，"SHIFT" 键是否被按下')]),t._v(" "),v("li",[v("code",[t._v("ctrlKey")]),t._v('返回当事件被触发时，"CTRL" 键是否被按下')]),t._v(" "),v("li",[t._v("如果按下则返回 true，否则返回 false。")])]),t._v(" "),v("p",[t._v("通过 event 事件对象的 key 来获取按键。（keycode 已弃用）")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("event.key")]),t._v("直接返回按键的字符串")])]),t._v(" "),v("p",[t._v("在文本框中输入内容，属于 onkeydown 中默认行为，如果使用"),v("code",[t._v("return false")]),t._v("，则文本框不能输入内容。")])])}),[],!1,null,null,null);e.default=s.exports}}]);