(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{539:function(s,a,n){"use strict";n.r(a);var e=n(50),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"增删改查"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#增删改查"}},[s._v("#")]),s._v(" 增删改查")]),s._v(" "),n("h2",{attrs:{id:"_1-添加"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-添加"}},[s._v("#")]),s._v(" 1.添加")]),s._v(" "),n("p",[s._v("向集合中添加文档数据：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 添加单条文档数据\ndb.表名/集合名.insertOne({ key: value , key: value...})\n\n# 添加多条文档数据\ndb.表名/集合名.insertMany([{}, {}, {}])\n\n# 可以添加单条也可以多条数据\ndb.表名/集合名.insert( {} )\ndb.表名/集合名.insert([{}, {} ])\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("例如")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 使用`insertOne`添加单个数据到`shop`库的`members`集合\ndb.members.insertOne({id:1,name: 'zhangsan'})\n\n# 使用`insertMany`添加2个数据到`shop`库的`members`集合\ndb.members.insertMany([{id:1,name: 'zhangsan'}, {id:2,name: 'lisi'}])\n\n# 使用`insert`添加2个数据到`shop`库的`members`集合\ndb.members.insert([{id:1,name: 'zhangsan'}, {id:2,name: 'lisi'}])\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("blockquote",[n("p",[s._v("实际使用的比较多的是：insertOne()、insert({})，插入多个的形式仅作了解。")])]),s._v(" "),n("h2",{attrs:{id:"_2-查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-查询"}},[s._v("#")]),s._v(" 2.查询")]),s._v(" "),n("h3",{attrs:{id:"_2-1查询所有的数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1查询所有的数据"}},[s._v("#")]),s._v(" 2.1查询所有的数据")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("db.表名/集合名.find();    # 获取全部\ndb.表名/集合名.find({});  # 获取全部\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("blockquote",[n("p",[n("code",[s._v("{ }")]),s._v("用于条件限制，当没条件的时候，上述两个用法效果一致")])]),s._v(" "),n("blockquote",[n("p",[s._v("关于"),n("code",[s._v("_id")])]),s._v(" "),n("p",[n("em",[n("strong",[s._v('{ "_id" : ObjectId("5c0fa4758878caa23d36c0fb"), "name" : "zhangsan" }')])])]),s._v(" "),n("p",[s._v("objectID类型\nObjectId对象对象数据组成：时间戳 |机器码|PID|计数器   "),n("strong",[s._v("系统自动生成")]),s._v("\n_id的键值我们可以自己输入，但是不能重复，因此为了避免工作的复杂建议不要人为的去干预_id的是很工程")])]),s._v(" "),n("h3",{attrs:{id:"_2-2带条件查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2带条件查询"}},[s._v("#")]),s._v(" 2.2带条件查询")]),s._v(" "),n("blockquote",[n("p",[s._v('此处允许使用多个条件，如果有就在"{}"中多写几个，'),n("strong",[s._v("默认是“且”条件关系")]),s._v("。")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("db.表名/集合名.find({key:value})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_2-3字段显示控制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3字段显示控制"}},[s._v("#")]),s._v(" 2.3字段显示控制")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("db.表名/集合名.find(条件,{字段名:0或1,....})\n# 0：不显示\n# 1：显示\n# _id字段，由于其是系统产生的，默认情况下是显示的\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"_2-4逻辑运算"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4逻辑运算"}},[s._v("#")]),s._v(" 2.4逻辑运算")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("$gt")]),s._v(" >")]),s._v(" "),n("li",[n("code",[s._v("$gte")]),s._v(">=")]),s._v(" "),n("li",[n("code",[s._v("$lt")]),s._v("<")]),s._v(" "),n("li",[n("code",[s._v("$lte")]),s._v("<=")]),s._v(" "),n("li",[n("code",[s._v("$ne")]),s._v("!=")]),s._v(" "),n("li",[n("code",[s._v("$in:[1,2,3]")]),s._v(" 集合，符合1或2或3的数据")]),s._v(" "),n("li",[n("code",[s._v("默认,分割的各种条件就是且关系")])]),s._v(" "),n("li",[n("code",[s._v("$or:[{条件1},{条件2}]")]),s._v(" 集合，符合1或2或3的数据")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("### 条件表达式\n# 年龄大于5的\ndb.表名/集合名.find({age:{$gt:5}});  #age > 5（great than）\n# 年龄大于等于5的\ndb.表名/集合名.find({age:{$gte:5}}); #age >= 5 （great than & equal）\n# 年龄小于5的\ndb.表名/集合名.find({age:{$lt:5}}); #age < 5  （less than）\n# 年龄小于等于5的\ndb.表名/集合名.find({age:{$lte:5}}); #age <= 5\n# 年龄不等于5的\ndb.表名/集合名.find({age:{$ne:5}}); #age != 5   （not equal）\n# 在一个指定的数值中查询  $in    年龄在不在这几个指定数值当中\ndb.表名/集合名.find({age:{$in:[1,2,3]})  ## where xxx in '集合'\n\n## 且关系  and\ndb.表名/集合名.find({age:{$lt:5},username:\"user11\"})\n## where age < 5 & username = 'user11'\n\n## 或关系 or（有点绕）\ndb.表名/集合名.find({$or:[{条件1},{条件2}]})\n## 例如\ndb.表名/集合名.find({$or:[{age:{$ne:5}},{username: \"user11\"}]});\n\n需求：查询出年龄小于30或者id>3的数据\ndb.members.find({$or:[{age:{$lt:30}},{id:{$gt:3}}]})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"_2-5模糊查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-5模糊查询"}},[s._v("#")]),s._v(" 2.5模糊查询")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#正则\ndb.表名/集合名.find({字段名:/正则/i})\n# i 不区分大小写\n# `不能加引号`，否则就成了字符串，成了字符串就成了精确匹配\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"_2-6统计"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-6统计"}},[s._v("#")]),s._v(" 2.6统计")]),s._v(" "),n("p",[s._v("计数操作：数记录的数量")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#统计总记录数\ndb.表名/集合名.count();\t\t// 统计所有的记录的总数\ndb.表名/集合名.find({}).count();\t// 统计符合条件的结果的记录总数\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("blockquote",[n("p",[s._v("注意点：find()顺序是否可以与count()颠倒。")]),s._v(" "),n("p",[s._v("count不能与find的顺序交换")])]),s._v(" "),n("h3",{attrs:{id:"_2-7排序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-7排序"}},[s._v("#")]),s._v(" 2.7排序")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 排序\n# 1 升序   -1 降序     字段\n# 以age字段来升序\ndb.表名/集合名.find().sort({age:1})\n# 以age字段来降序\ndb.表名/集合名.find().sort({age:-1})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"_2-8分页-实用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-8分页-实用"}},[s._v("#")]),s._v(" 2.8分页（实用）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 指定获取几条  skip/limit   分页\ndb.表名/集合名.find().limit(3);\ndb.表名/集合名.find().skip(1).limit(3);\n\n## skip表示起始位置，也就是从第几个开始\n## limit表示获取的记录的个数（长度）\n## skip与limit的顺序先后无所谓\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"_3-更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-更新"}},[s._v("#")]),s._v(" 3.更新")]),s._v(" "),n("p",[s._v("根据条件修改已存在集合中的文档数据：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 更新是要有条件的，没有条件在数据库层面来讲是可以更新的，但是实际是没有对应的业务需求\n\n# 只修改单条文档\ndb.表名/集合名.updateOne({key:value},{$set:{key:value}})\n# 修改符合条件所有文档数据\ndb.表名/集合名.updateMany({key:value},{$set:{key:value}})\n## 如果上述两个方法的条件一致，并且有多个符合条件的，那么：\n# updateOne，不管有多少个符合条件的只修改第一个\n# updateMany，有多少改多少\n\n# 字段的值的`自增和自减`\ndb.表名/集合名.updateOne({key:value},{$inc:{key:1}})\t\t// increments，自增\ndb.表名/集合名.updateMany({key:value},{$inc:{key:1}})\ndb.表名/集合名.updateOne({key:value},{$inc:{key:-1}})\t\t// decrements\ndb.表名/集合名.updateMany({key:value},{$inc:{key:-1}})\n# 自增是整数，自减是负数\n# 更新和删除操作允许不写条件，但是不能不写\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h2",{attrs:{id:"_4-删除-了解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-删除-了解"}},[s._v("#")]),s._v(" 4.删除（了解）")]),s._v(" "),n("p",[s._v("删除在实际开发的时候一般不用，"),n("strong",[s._v("正常做程序开发的时候所使用的删除实际上是修改")]),s._v("。")]),s._v(" "),n("p",[s._v("删除分为：真删除（物理删除）、假删除（逻辑删除）。")]),s._v(" "),n("p",[s._v("删除集合中已存在的文档数据：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 删除单条文档\ndb.表名/集合名.deleteOne({ key: value })\n# 删除符合条件多条文档\ndb.表名/集合名.deleteMany({key: value})\n# 删除全部数据（慎用）\ndb.表名/集合名.deleteMany({})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);