(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{557:function(s,t,n){"use strict";n.r(t);var a=n(21),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"vue-数据代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-数据代理"}},[s._v("#")]),s._v(" Vue 数据代理")]),s._v(" "),n("h2",{attrs:{id:"_1-object-defineproperty"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-object-defineproperty"}},[s._v("#")]),s._v(" 1 Object.defineProperty()")]),s._v(" "),n("p",[n("code",[s._v("Object.defineProperty()")]),s._v("是用来在一个对象上添加一个新属性，或者修改一个对象的现有属性， 并返回这个对象。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("修改的对象"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'对象的属性名'")]),s._v("，"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("属性描述对象"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("属性描述对象提供 6 个元属性")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("value 是该属性的属性值，默认为 undefined")])]),s._v(" "),n("li",[n("p",[s._v("writable 控制属性是否可以被删除，默认值是 false")])]),s._v(" "),n("li",[n("p",[s._v("enumerable 控制属性是否可以被枚举，默认值是 false")])]),s._v(" "),n("li",[n("p",[s._v("configurable 控制属性是否可以被删除，默认值是 false")])]),s._v(" "),n("li",[n("p",[s._v("get 表示该属性的取值函数（"),n("code",[s._v("getter")]),s._v("），默认为"),n("code",[s._v("undefined")]),s._v("。")])]),s._v(" "),n("li",[n("p",[s._v("set 表示该属性的存值函数（setter），默认为"),n("code",[s._v("undefined")]),s._v("。")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("        let num = 18\n        let person = {\n            name: '张三',\n            gender: '男',\n        }\n        Object.defineProperty(person,'age',{\n            // value: 18,\n            // enumerable: true,//控制属性是否可以被枚举，默认值是false\n            // writable: true,//控制属性是否可以被修改，默认值是false\n            // configurable: true,//控制属性是否可以被删除，默认值是false\n            get(){//当有人读取age属性时，get函数（getter）会被调用，且返回值就是age的值\n                console.log('有人读取了age属性');\n                return num\n            },\n            set(value){//当有人修改了age属性时，set函数（setter）会被调用，且会收到修改的具体值\n                console.log('有人修改了age属性，且值是' + value);\n            }\n        })\n\n        console.log(person);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("ul",[n("li",[n("p",[s._v("当有人读取 age 属性时，get 函数（getter）会被调用，且"),n("strong",[s._v("返回值就是 age")]),s._v("的值")])]),s._v(" "),n("li",[n("p",[s._v("当有人修改了 age 属性时，set 函数（setter）会被调用，且会收到修改的具体值")])]),s._v(" "),n("li",[n("p",[s._v("Object.defineProperty()将 num 和 person 绑定在一起，这就是 Vue 框架中，数据代理的原理")])])]),s._v(" "),n("h2",{attrs:{id:"_2-数据代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-数据代理"}},[s._v("#")]),s._v(" 2 数据代理")]),s._v(" "),n("p",[s._v("数据代理：通过一个对象代理对另一个对象的属性的操作（读/写）")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" obj1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" obj2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" y "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'x'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//value = obj.x")]),s._v("\n    obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("ul",[n("li",[s._v("通过 obj2 也可以修改 obj1")])])])}),[],!1,null,null,null);t.default=e.exports}}]);